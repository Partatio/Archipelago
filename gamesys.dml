DML1

#script "squirrel"

CreateArch "Misc Metaprops" "APPlayerScripts" 
{
	+ObjProp "Scripts" 
	{
	"Script 0" "PlayerScripts"
	"Don't Inherit" false
	}
}
+MetaProp "The Player" "APPlayerScripts"


CreateArch "Goodies" "APLocation"
{
	+ObjProp "ModelName" 
	{
	"" "plantc"
	}
	+ObjProp "PsiRadar"
	{
	"" "Powerup"
	}
	+ObjProp "FrobInfo"
	{
	"World Action" "Script"
	"Inv Action" ""
	"Tool Action" ""
	}
	+ObjProp "VoiceIdx"
	{
	"" 0
	}
	+ObjProp "ObjIcon"
	{
	"" "iplant1"
	}
	+ObjProp "InvDims"
	{
	"Width"	1
	"Height" 1
	}
	+ObjProp "ObjName"
	{
	"" "APLocation: "An APLocation""
	}
	+ObjProp "PhysAttr"
	{
	"Gravity %" 5
	}
}

CreateArch "Misc Metaprops" "APLocationScripts"
{
	+ObjProp "Scripts"
	{
	"Script 0" "APLocationFuncs"
	}
}
+MetaProp "APLocation" "APLocationScripts"


CreateArch "Object" "APLocationTracker"
{
	+ObjProp "RenderType"
	{
	"" "Not Rendered"
	}
}

CreateArch "APLocation" "APLLovesense1"
{
	+ObjProp "VoiceIdx"
	{
	"" 1901
	}
	+ObjProp "ObjShort"
	{
	"" "APLLovesense1: "Lovesense APLocation 1, purchase once""
	}
}

CreateArch "APLocation" "APLLovesense2"
{
	+ObjProp "VoiceIdx"
	{
	"" 1902
	}
	+ObjProp "ObjShort"
	{
	"" "APLLovesense2: "Lovesense APLocation 2, purchase once""
	}
}

CreateArch "APLocation" "APLLovesense3"
{
	+ObjProp "VoiceIdx"
	{
	"" 1903
	}
	+ObjProp "ObjShort"
	{
	"" "APLLovesense3: "Lovesense APLocation 3, purchase once""
	}
}

CreateArch "APLocation" "APLLovesense4"
{
	+ObjProp "VoiceIdx"
	{
	"" 1904
	}
	+ObjProp "ObjShort"
	{
	"" "APLLovesense4: "Lovesense APLocation 4, purchase once""
	}
}

CreateArch "APLocation" "APLCommand1"
{
	+ObjProp "VoiceIdx"
	{
	"" 1905
	}
	+ObjProp "ObjShort"
	{
	"" "APLCommand1: "Command1 APLocation, purchase once""
	}
}

CreateArch "Trainers" "CybModShop"
{
	+ObjProp "ModelName" 
	{
	"" "corm_ric"
	}
	+ObjProp "FrobInfo"
	{
	"World Action" "Script"
	}
}

CreateArch "Misc Metaprops" "CybModShopScripts"
{
	+ObjProp "Scripts"
	{
	"Script 0" "CybModShop"
	}
}
+MetaProp "CybModShop" "CybModShopScripts"



//RoSoDudes repairable crates
////Make Hackable Crates repairable after critically failing a hack
//First disable explosion by intercepting script messages
+ObjProp -1886 "Scripts" //Hackable Crate
{
    "Script 0" "rsdHackableCrate" //was HackableCrate
    "Script 1" "NVSimpleRepair"
    "Script 2" "HackableCrate"
}
//Then setup repair minigame difficulty
+ObjProp -1886 "ReqTechDesc" //Hackable Crate
{
    "Repair" 1
}
+ObjProp -1886 "RepairDiff" //Hackable Crate
{
    "Success %" 20
    "Critical Fail %" 0 //WARNING: putting any ICE nodes here will result in the object disappearing on critfail with no explosion!
    "Cost" 4.00
}
+ObjProp -420 "ReqTechDesc" //SuperCrate
{
    "Repair" 1
}
+ObjProp -420 "RepairDiff" //SuperCrate
{
    "Success %" -10
    "Critical Fail %" 0 //WARNING: putting any ICE nodes here will result in the object disappearing on critfail with no explosion!
    "Cost" 4.00
}



//Sarge945s No Keypad Cheese
//Attach Keypad Script to all keypads
//They have don't inherit set, so we need to add it to the archetype manually.
+ObjProp -258 "Scripts"
{
    "Script 2" "sargeRandomKeypad"
}